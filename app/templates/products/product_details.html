{% extends "base.html" %}
{% block title %}
商品詳細ページ
{% endblock %}
{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/product_details.css') }}">
<div class="container">
    <div class="product-main">
        <div class="product-images">
            <div class="main-image-container">
                <img src="{{ url_for('static', filename='img/image_22.png') }}" alt="スライド">
                <div class="sold-badge">通報</div>
                <button class="nav-arrow left" onclick="changeImage(-1)">‹</button>
                <button class="nav-arrow right" onclick="changeImage(1)">›</button>
            </div>
            <div class="thumbnail-list">
                <img class="thumbnail" src="{{ url_for('static', filename='img/image 66.png') }}" alt="スライド">
                <img class="thumbnail" src="{{ url_for('static', filename='img/image 66.png') }}" alt="スライド">
                <img class="thumbnail" src="{{ url_for('static', filename='img/image 66.png') }}" alt="スライド">
            </div>
        </div>
        <div class="product-info">
            <h1 class="product-title">{{ product.product_name }}</h1>
            <div class="price-section">
                
                <div class="price-row">
                    <span>購入価格</span>
                    <span class="price">{{ product.purchasePrice }}円<span style="font-size:14px; font-weight:normal;">
                            送料込み</span></span>
                </div>
                {% if calculated_prices %}
                {% for period_text, total_price in calculated_prices.items() %}
                <div class="price-row">
                    <span>レンタル価格</span>
                    <span class="price">{{ period_text }}：</span>
                    <span class="price">{{ total_price | int }}円<span style="font-size:14px; font-weight:normal;">
                            送料込み</span></span>
                            </div>
                {% endfor %}
                {% endif %}
            </div>
            <div class="action-buttons cursor-pointer">
                <a href="{{url_for('products.purchase')}}">
                <button class="btn">購入する</button>
                </a>
                <a href="{{url_for('products.purchase')}}">
                <button class="btn">レンタル</button>
                </a>
            </div>
        </div>
    </div>
    <div class="tabs">
        <button class="tab active" onclick="switchTab(0)">アイテム説明</button>
        <button class="tab" onclick="switchTab(1)">商品概要</button>
        <button class="tab" onclick="switchTab(2)">サイズ概要</button>
        <button class="tab" onclick="switchTab(3)">コメント</button>

    </div>
    <div class="tab-content active" id="tab0">
        <p>{{ product.explanation }}</p>
    </div>
    <div class="tab-content" id="tab1">
        <p><strong>系統カラー:</strong> {{ product.color}}<br>
            <strong>ジェンダーカテゴリ:</strong>{{ product.for}}<br>
            <strong>アイテムカテゴリ:</strong>{{ productcategory_name}}<br>
            <strong>ブランド:</strong> {{ product.brand_name}}
        </p>
    </div>
    <div class="tab-content" id="tab2">
        {% if topSize %}
        <p><strong>肩幅:</strong> {{topSize.shoulderWidth}}<br>
            <strong>身幅:</strong> {{topSize.bodyWidth}}<br>
            <strong>そで丈:</strong>{{topSize.sleeveLength}}%<br>
            <strong>着丈:</strong> {{topSize.bodyLength}}<br>
            <strong>サイズ備考欄:</strong> {{topSize.notes}}
        </p>
        {% endif %}
        {% if bottomsSize %}

        <p><strong>ヒップ:</strong> {{bottomsSize.hip}}<br>
            <strong>パンツ丈:</strong> {{bottomsSize.totalLength}}<br>
            <strong>股上:</strong>{{bottomsSize.rise}}%<br>
            <strong>股下:</strong> {{bottomsSize.inseam}}<br>
            <strong>ウエスト:</strong> {{bottomsSize.waist}}<br>
            <strong>もも周り:</strong> {{bottomsSize.thighWidth}}<br>
            <strong>スソ周り:</strong> {{bottomsSize.hemWidth}}<br>
            <strong>スカート丈:</strong> {{bottomsSize.skirtLength}}<br>
            <strong>サイズ備考欄:</strong> {{bottomsSize.notes}}
        </p>
        {% endif %}
    </div>


    <div class="tab-content" id="tab3">
        {% for comment in comments %}
        <div class="comment-item">
            <div class="comment-avatar"></div>
            <div class="comment-content">
                <div class="comment-header">
                    <!-- <a href="{{url_for('userprf.userprf')}}" class="comment-link"></a> -->
                    <span class="comment-name">{{ comment.user_name }}</span>
                    {% if comment.is_seller %}
                    <span class="seller-badge">出品者</span>
                    {% endif %}
                    </a>
                </div>
                <div class="comment-text">{{ comment.text }}</div>
            </div>
        </div>
        {% endfor %}
        <div class="comment-form">
            <input type="text" class="comment-input" placeholder="商品について質問や気になることがコメントしてください。">
            <button class="submit-btn">投稿</button>
        </div>
    </div>
    
    <div class="seller-info">
        <div class="seller-header">
            <div class="seller-details">
                <div class="seller-avatar"></div>
                <div>
                    <div class="seller-name">{{ seller_info.username }}</div>
                    <span class="stars">
                    {% for i in range(evaluation)%}★{% endfor %}
                    {% for i in range(5-evaluation)%}☆{% endfor %}</span>
                    <span class="rating-count">{{evaluationCount}}</span>

                    <!-- <div class="rating">★ 4.3</div> -->
                </div>
            </div>
            <button class="follow-btn">フォロー</button>
        </div>
    </div>
    <div class="section-title">この出品者の他のアイテム</div>
    <div class="item-grid">
        <div class="item-card">
                <img class="thumbnail" src="{{ url_for('static', filename='img/image 43.png') }}" alt="スライド">
        </div>
        <div class="item-card">
                <img class="thumbnail" src="{{ url_for('static', filename='img/image 43.png') }}" alt="スライド">
        </div>
        <div class="item-card">
                <img class="thumbnail" src="{{ url_for('static', filename='img/image 43.png') }}" alt="スライド">
        </div>
        <div class="item-card">
                <img class="thumbnail" src="{{ url_for('static', filename='img/image 43.png') }}" alt="スライド">
        </div>
    </div>
    <div class="section-title">おすすめアイテム</div>
    <div class="item-grid">
        <div class="item-card">
                <img class="thumbnail" src="{{ url_for('static', filename='img/image 43.png') }}" alt="スライド">
            <div class="item-title">出品タイトル</div>
            <div class="item-price">¥●●●●●</div>
        </div>
        <div class="item-card">
                <img class="thumbnail" src="{{ url_for('static', filename='img/image 43.png') }}" alt="スライド">
            <div class="item-title">出品タイトル</div>
            <div class="item-price">¥●●●●●</div>
        </div>
        <div class="item-card">
                <img class="thumbnail" src="{{ url_for('static', filename='img/image 43.png') }}" alt="スライド">
            <div class="item-title">出品タイトル</div>
            <div class="item-price">¥●●●●●</div>
        </div>
        <div class="item-card">
                <img class="thumbnail" src="{{ url_for('static', filename='img/image 43.png') }}" alt="スライド">
            <div class="item-title">出品タイトル</div>
            <div class="item-price">¥●●●●●</div>
        </div>
    </div>
</div>
<script src="{{ url_for('static', filename='js/product_details.js') }}"></script>
{% endblock %}