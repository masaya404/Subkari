<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>購入の確認 - SUBKARI</title>
    <link rel="stylesheet" href="../../static/css/purchase.css">
    
</head>
<body>

    <div class="container">
        <h1>購入の確認</h1>

        <div class="content-wrapper">
            <div class="left-column">
                <!-- 商品情報 -->
                <div class="section">
                    <div class="product-info">
                        <div class="product-image"></div>
                        <div class="product-details">
                            <div class="product-name">ファーパーカー</div>
                            <div class="product-price">¥9,900</div>
                        </div>
                    </div>
                </div>

                <!-- 支払い方法 -->
                <div class="section">
                    <div class="section-header">
                        <h2 class="section-title">支払い方法</h2>
                        <a href="#" class="change-btn" onclick="openPaymentModal(event)">変更する</a>
                    </div>
                    <div class="payment-info">
                        クレジットカード決済
                        <div class="masked-card" id="selectedCard">************1234 01/01</div>
                    </div>
                </div>

                <!-- 配送先 -->
                <div class="section">
                    <div class="section-header">
                        <h2 class="section-title">配送先</h2>
                        <a href="#" class="change-btn" onclick="openAddressModal(event)">変更する</a>
                    </div>
                    <div class="shipping-info" id="selectedAddress">
                        HAL 大阪（ハル オオサカ）<br>
                        〒530-0001<br>
                        大阪府 大阪市 北区 梅田3丁目3−1
                    </div>
                </div>

                <!-- 置き配の指定 -->
                <div class="section">
                    <div class="section-header">
                        <h2 class="section-title">置き配の指定</h2>
                        <a href="#" class="change-btn" onclick="openDeliveryLocationModal(event)">変更する</a>
                    </div>
                    <div class="delivery-info" id="selectedDeliveryLocation">
                        玄関前
                    </div>
                </div>
            </div>

            <div class="right-column">
                <div class="summary-box">
                    <div class="summary-row">
                        <span class="summary-label">商品代金</span>
                        <span class="summary-value">¥9,900</span>
                    </div>
                    <div class="summary-row">
                        <span class="summary-label">お支払い方法</span>
                        <span class="summary-value">クレジットカード</span>
                    </div>
                </div>

                <div class="terms-notice">
                    <a href="#">利用規約</a>および<a href="#">プライバシーポリシー</a>に同意の上、ご購入ください。
                </div>

                <button class="confirm-btn" onclick="confirmPurchase()">購入を確定する</button>
            </div>
        </div>
    </div>

    <!-- <footer>
        <div class="footer-content">
            <div class="footer-links">
                <a href="#">初めての方へ</a>
                <a href="#">サイトマップ</a>
                <a href="#">FAQ</a>
                <a href="#">お問い合わせ</a>
                <a href="#">利用規約／プライバシーポリシー</a>
                <a href="#">特定商取引法に基づく表記</a>
            </div>
            <div class="footer-copyright">
                © 2025 HAL OSAKA IA・IH Team 5
            </div>
        </div>
    </footer>
 -->
    <!-- カード登録ページオーバーレイ -->
    <div class="card-register-overlay" id="cardRegisterPage">
        <div class="card-register-header">
            <div class="logo">SUBKARI</div>
            <a class="back-link" onclick="closeCardRegister()">← 戻る</a>
        </div>
        <div class="card-register-container-inner">
            <div class="card-register-content">
                <h2 class="card-register-title">クレジットカードの登録</h2>

                <div class="card-brands-section">
                    <div class="card-brands-label">利用可能なクレジットカード</div>
                    <div class="card-logos">
                        <span class="visa-logo">VISA</span>
                        <div class="mastercard-logo"></div>
                        <span class="jcb-logo">JCB</span>
                        <span class="amex-logo">AMEX</span>
                    </div>
                </div>

                <form onsubmit="registerNewCard(event)">
                    <div class="form-group">
                        <label class="form-label">カード番号</label>
                        <input type="text" class="form-input" placeholder="0000 0000 0000 0000" maxlength="19" id="newCardNumber">
                    </div>

                    <div class="form-group">
                        <label class="form-label">有効期限</label>
                        <input type="text" class="form-input" placeholder="MM/YY" maxlength="5" id="newCardExpiry">
                    </div>

                    <div class="form-group">
                        <label class="form-label">セキュリティコード</label>
                        <input type="text" class="form-input" placeholder="3桁または4桁の番号" maxlength="4" id="newSecurityCode">
                        <div class="security-help" onclick="openSecurityHelp()">
                            <span>セキュリティコードとは</span>
                            <div class="help-icon">?</div>
                        </div>
                    </div>

                    <button type="submit" class="register-btn">登録する</button>
                </form>
            </div>
        </div>
    </div>

    <!-- 支払い方法モーダル -->
    <div class="modal" id="paymentModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">お支払い方法</h3>
                <a href="#" class="edit-link" onclick="editPaymentMethods(event)">編集する</a>
            </div>
            <div class="modal-body">
                <!-- クレジットカード1 -->
                <div class="payment-option" onclick="selectPayment('card1')">
                    <div class="radio-btn selected" id="radio-card1"></div>
                    <div class="payment-details">
                        <div class="card-number">************1234 01/01</div>
                    </div>
                </div>

                <!-- クレジットカード2 -->
                <div class="payment-option" onclick="selectPayment('card2')">
                    <div class="radio-btn" id="radio-card2"></div>
                    <div class="payment-details">
                        <div class="card-number">************1234 02/02</div>
                    </div>
                </div>

                <!-- クレジットカード3 -->
                <div class="payment-option" onclick="selectPayment('card3')">
                    <div class="radio-btn" id="radio-card3"></div>
                    <div class="payment-details">
                        <div class="card-number">************1234 03/03</div>
                    </div>
                </div>

                <!-- 新しいクレジットカード追加 -->
                <div class="add-card-link" onclick="goToCardRegister()">
                    <div class="add-icon">+</div>
                    <span>新しいクレジットカードを登録する</span>
                </div>

                <!-- コンビニ支払い -->
                <div class="payment-method-item" onclick="selectPayment('conveni')">
                    <div class="radio-btn" id="radio-conveni"></div>
                    <div class="payment-method-name">コンビニ支払い</div>
                </div>

                <!-- PayPay -->
                <div class="payment-method-item" onclick="selectPayment('paypay')">
                    <div class="radio-btn" id="radio-paypay"></div>
                    <div class="payment-method-name">PayPay</div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="update-btn" onclick="updatePaymentMethod()">更新する</button>
            </div>
        </div>
    </div>

    <!-- 支払い方法編集モーダル -->
    <div class="modal" id="paymentEditModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">お支払い方法</h3>
                <a href="#" class="edit-link" onclick="completePaymentEdit(event)">完了する</a>
            </div>
            <div class="modal-body">
                <!-- クレジットカード1 -->
                <div class="payment-option" onclick="selectPayment('card1')">
                    <div class="radio-btn selected" id="radio-edit-card1"></div>
                    <div class="payment-details">
                        <div class="card-number">************1234 01/01</div>
                    </div>
                    <button class="delete-btn" onclick="confirmDeleteCard(event, 'card1')">削除する</button>
                </div>

                <!-- クレジットカード2 -->
                <div class="payment-option" onclick="selectPayment('card2')">
                    <div class="radio-btn" id="radio-edit-card2"></div>
                    <div class="payment-details">
                        <div class="card-number">************1234 02/02</div>
                    </div>
                    <button class="delete-btn" onclick="confirmDeleteCard(event, 'card2')">削除する</button>
                </div>

                <!-- クレジットカード3 -->
                <div class="payment-option" onclick="selectPayment('card3')">
                    <div class="radio-btn" id="radio-edit-card3"></div>
                    <div class="payment-details">
                        <div class="card-number">************1234 03/03</div>
                    </div>
                    <button class="delete-btn" onclick="confirmDeleteCard(event, 'card3')">削除する</button>
                </div>

                <!-- 新しいクレジットカード追加 -->
                <div class="add-card-link" onclick="goToCardRegister()">
                    <div class="add-icon">+</div>
                    <span>新しいクレジットカードを登録する</span>
                </div>

                <!-- コンビニ支払い -->
                <div class="payment-method-item" onclick="selectPayment('conveni')">
                    <div class="radio-btn" id="radio-edit-conveni"></div>
                    <div class="payment-method-name">コンビニ支払い</div>
                </div>

                <!-- PayPay -->
                <div class="payment-method-item" onclick="selectPayment('paypay')">
                    <div class="radio-btn" id="radio-edit-paypay"></div>
                    <div class="payment-method-name">PayPay</div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="update-btn" onclick="updatePaymentMethod()">更新する</button>
            </div>
        </div>
    </div>

    <!-- 削除確認モーダル -->
    <div class="modal" id="deleteConfirmModal">
        <div class="confirm-modal">
            <p class="confirm-modal-text">この項目を削除しますか？</p>
            <div class="confirm-modal-buttons">
                <button class="cancel-btn" onclick="closeDeleteConfirm()">キャンセル</button>
                <button class="delete-confirm-btn" onclick="executeDelete()">削除する</button>
            </div>
        </div>
    </div>

    <!-- 置き配指定モーダル -->
    <div class="modal" id="deliveryLocationModal">
        <div class="modal-content">
            <div class="modal-header" style="position: relative;">
                <h3 class="modal-title">置き配の指定</h3>
                <button class="close-btn" onclick="closeDeliveryLocationModal()">×</button>
            </div>
            <div class="modal-body">
                <div class="delivery-option" onclick="selectDeliveryLocation('玄関前')">
                    <div class="radio-btn selected" id="radio-door"></div>
                    <div class="delivery-option-text">玄関前</div>
                </div>
                <div class="delivery-option" onclick="selectDeliveryLocation('宅配ボックス')">
                    <div class="radio-btn" id="radio-box"></div>
                    <div class="delivery-option-text">宅配ボックス</div>
                </div>
                <div class="delivery-option" onclick="selectDeliveryLocation('ガスメーターボックス')">
                    <div class="radio-btn" id="radio-gas"></div>
                    <div class="delivery-option-text">ガスメーターボックス</div>
                </div>
                <div class="delivery-option" onclick="selectDeliveryLocation('自転車のカゴ')">
                    <div class="radio-btn" id="radio-bicycle"></div>
                    <div class="delivery-option-text">自転車のカゴ</div>
                </div>
                <div class="delivery-option" onclick="selectDeliveryLocation('車庫')">
                    <div class="radio-btn" id="radio-garage"></div>
                    <div class="delivery-option-text">車庫</div>
                </div>
                <div class="delivery-option" onclick="selectDeliveryLocation('建物内受付/管理人')">
                    <div class="radio-btn" id="radio-reception"></div>
                    <div class="delivery-option-text">建物内受付/管理人</div>
                </div>
                <div class="delivery-option" onclick="selectDeliveryLocation('選択しない')">
                    <div class="radio-btn" id="radio-none"></div>
                    <div class="delivery-option-text">選択しない</div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="update-btn" onclick="updateDeliveryLocation()">更新する</button>
            </div>
        </div>
    </div>

    <!-- 配送先住所一覧モーダル -->
    <div class="modal" id="addressModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">住所一覧</h3>
                <a href="#" class="edit-link" onclick="editAddresses(event)">編集する</a>
            </div>
            <div class="modal-body">
                <!-- 住所1 -->
                <div class="address-option" onclick="selectAddress('address1')">
                    <div class="radio-btn selected" id="radio-address1"></div>
                    <div class="address-details">
                        <div class="address-name">HAL 大阪（ハル オオサカ）</div>
                        <div class="address-postal">〒530-0001</div>
                        <div class="address-full">大阪府 大阪市 北区 梅田3丁目3−1</div>
                    </div>
                </div>

                <!-- 住所2 -->
                <div class="address-option" onclick="selectAddress('address2')">
                    <div class="radio-btn" id="radio-address2"></div>
                    <div class="address-details">
                        <div class="address-name">HAL 東京（ハル トウキョウ）</div>
                        <div class="address-postal">〒160-0023</div>
                        <div class="address-full">東京都新宿区西新宿1丁目7−3</div>
                    </div>
                </div>

                <!-- 住所3 -->
                <div class="address-option" onclick="selectAddress('address3')">
                    <div class="radio-btn" id="radio-address3"></div>
                    <div class="address-details">
                        <div class="address-name">HAL 名古屋（ハル ナゴヤ）</div>
                        <div class="address-postal">〒450-0002</div>
                        <div class="address-full">愛知県名古屋市中村区名駅4丁目27−1</div>
                    </div>
                </div>

                <!-- 新しい住所追加 -->
                <div class="add-card-link" onclick="addNewAddress()">
                    <div class="add-icon">+</div>
                    <span>新しい住所を登録する</span>
                </div>

                <!-- 警告文 -->
                <div class="warning-notice">
                    <span class="warning-icon">⚠</span>
                    <span>「新しい住所を登録」に郵便局/コンビニの住所を設定されても、商品を受取ることはできません</span>
                </div>
            </div>
            <div class="modal-footer">
                <button class="update-btn" onclick="updateAddress()">更新する</button>
            </div>
        </div>
    </div>

    <!-- 配送先住所編集モーダル -->
    <div class="modal" id="addressEditModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">住所一覧</h3>
                <a href="#" class="edit-link" onclick="completeAddressEdit(event)">完了する</a>
            </div>
            <div class="modal-body">
                <!-- 住所1 -->
                <div class="address-option" onclick="selectAddress('address1')">
                    <div class="radio-btn selected" id="radio-edit-address1"></div>
                    <div class="address-details">
                        <div class="address-name">HAL 大阪（ハル オオサカ）</div>
                        <div class="address-postal">〒530-0001</div>
                        <div class="address-full">大阪府 大阪市 北区 梅田3丁目3−1</div>
                    </div>
                    <div class="address-actions">
                        <button class="address-delete-btn" onclick="confirmDeleteAddress(event, 'address1')">削除する</button>
                    </div>
                </div>

                <!-- 住所2 -->
                <div class="address-option" onclick="selectAddress('address2')">
                    <div class="radio-btn" id="radio-edit-address2"></div>
                    <div class="address-details">
                        <div class="address-name">HAL 東京（ハル トウキョウ）</div>
                        <div class="address-postal">〒160-0023</div>
                        <div class="address-full">東京都新宿区西新宿1丁目7−3</div>
                    </div>
                    <div class="address-actions">
                        <button class="address-delete-btn" onclick="confirmDeleteAddress(event, 'address2')">削除する</button>
                    </div>
                </div>

                <!-- 住所3 -->
                <div class="address-option" onclick="selectAddress('address3')">
                    <div class="radio-btn" id="radio-edit-address3"></div>
                    <div class="address-details">
                        <div class="address-name">HAL 名古屋（ハル ナゴヤ）</div>
                        <div class="address-postal">〒450-0002</div>
                        <div class="address-full">愛知県名古屋市中村区名駅4丁目27−1</div>
                    </div>
                    <div class="address-actions">
                        <button class="address-delete-btn" onclick="confirmDeleteAddress(event, 'address3')">削除する</button>
                    </div>
                </div>

                <!-- 新しい住所追加 -->
                <div class="add-card-link" onclick="addNewAddress()">
                    <div class="add-icon">+</div>
                    <span>新しい住所を登録する</span>
                </div>

                <!-- 警告文 -->
                <div class="warning-notice">
                    <span class="warning-icon">⚠</span>
                    <span>「新しい住所を登録」に郵便局/コンビニの住所を設定されても、商品を受取ることはできません</span>
                </div>
            </div>
            <div class="modal-footer">
                <button class="update-btn" onclick="updateAddress()">更新する</button>
            </div>
        </div>
    </div>

    <!-- セキュリティコード説明モーダル -->
    <div class="modal" id="securityHelpModal">
        <div class="security-modal-content">
            <button class="close-btn" onclick="closeSecurityHelp()" style="position: absolute;">×</button>
            <h3 class="security-modal-title">セキュリティコードとは</h3>
            <p class="security-modal-text">
                カードの前面もしくは背面に記載されている、3桁または4桁の番号をご確認ください
            </p>
            <div class="security-card-images">
                <div class="security-card-image">
                    <div class="card-back"></div>
                    <span class="security-code-label" style="bottom: 20px; right: 20px;">123</span>
                </div>
                <div class="security-card-image amex">
                    <span class="security-code-label" style="top: 50px; right: 20px;">1234</span>
                    <span style="position: absolute; top: 20px; left: 20px; font-size: 10px; font-weight: bold; color: #fff;">AMERICAN EXPRESS</span>
                    <span style="position: absolute; bottom: 20px; left: 20px; font-size: 9px; color: #fff;">3333 123456 9000</span>
                </div>
            </div>
        </div>
    </div>
    <script src="../../js/purchase.js"></script>
    
</body>
</html>