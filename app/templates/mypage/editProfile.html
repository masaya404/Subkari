{% extends "base.html" %}
{% block title %}
    編集ボタンありプロフィール
{% endblock %}

{% block content %}
<!-- <link rel="stylesheet" href="{{ url_for('static', filename='css/editProfile.css') }}"> -->

<link rel="stylesheet" href="../../static/css/editProfile.css">
    <main class="editProfile_main">
        <h1></h1>
        <div class="profile-header">
            <img src="{{url_for('static' , filename='img/'+user_info.identifyImg)}}" alt="プロフィール画像" class="profile-image">
            <div class="profile-info">
                <h1 class="profile-name">{{user_info.username}}</h1>
                
                <div class="profile-rating">
                    <span class="stars">
                    {% for i in range(evaluation.評価)%}★{% endfor %}
                    {% for i in range(5-evaluation.評価)%}☆{% endfor %}</span>
                    <span class="rating-count">{{evaluationCount.評価件数}}</span>
                    {% if smoker == 0%}
                        <span class="reviewer-badge">喫煙者</span>
                    {% else %}
                        <span class="reviewer-badge">非喫煙者</span>
                    {% endif %} 
                </div>
                
                <div class="profile-stats">
                    <div class="stat-item">
                        <span class="stat-number">{{products.出品数}}</span>
                        <span class="stat-label">出品数</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number">{{follows.フォロー数}}</span>
                        <span class="stat-label">フォロー</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number">{{followers.フォロワー数}}</span>
                        <span class="stat-label">フォロワー</span>
                    </div>
                </div>
                
                <div class="profile-description" id="profileDescription">
                    {{user_info.introduction}}
                    <!-- 何文字以上でを作る -->
                    <span id="moreText" style="display: none;">
                        <br><br>
                        【取引について】<br>
                        ・購入時すぐに気持ちメッセージをお願いいたします。<br>
                        ・発送時期は平日夕方となっています。基本即日発送はできません。プロフィルをしっかりと読んでいただくと判断した場合ものよっては取引を解除させていただきますので、安心して取引できない相手と判断し、評価は「悪い」にさせていただきます。
                    </span>
                </div>
                
                <a href="#" class="show-more" id="showMoreBtn" onclick="toggleDescription(event)">もっと見る</a>
                <a href="#" class="show-more" id="showLessBtn" onclick="toggleDescription(event)" style="display: none;">閉じる</a>
            </div>
            
           <div class="profile-actions" ><a href="{{url_for('mypage.edit')}}">
                <button class="edit-profile-btn">プロフィールを編集</button>
            </div>
            </a>
        </div>

        <!-- 商品グリッド -->
        <form action="{{url_for('mypage.edit')}}" method="post"> <!--商品詳細へ遷移-->
            <div class="products-grid">
                {% if productName %}
                {% for name in productName %}
                <div class="product-card">
                    <button>
                        {% if productImg %}
                        <img src="{{productImg[loop.index0]["img"]}}" alt="{{name.name}}の画像" class="product-image"></button>
                        {% else %}
                        <p>画像がありません</p>
                        {% endif %}
                    <div class="product-name" name="product_name">{{productName[loop.index0]["name"]}}</div>
                    
                </div>
                {% endfor %}
                {% else %}
                <p>まだ出品していません</p>
                {% endif %}
            </div>
        </form>

        <!-- もっと見るボタン -->
        <div class="load-more">
            <button class="load-more-btn">もっと見る</button>
        </div>
    </main>


    <script src="../../static/js/editProfile.js"></script>
{% endblock %} 