<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>振込先口座の登録</title>
    <style>
        /* ------------------------------------------- */
        /* CSS: 画面全体のデザインとUIの再現 */
        /* ------------------------------------------- */

        body {
            /* 背景は白 */
            background-color: #ffffff;
            /* フォント */
            font-family: "Hiragino Kaku Gothic ProN", "メイリオ", Meiryo, sans-serif;
            color: #333333;
            margin: 0;
            padding: 0;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .main-content {
            /* ページの中央に配置し、適切な幅を設定 */
            max-width: 600px;
            width: 100%;
            margin: 0 auto;
            padding: 50px 20px 100px;
            flex-grow: 1;
        }

        header {
            margin-bottom: 40px;
        }

        .logo {
            font-size: 28px;
            font-weight: bold;
            color: #333333;
        }

        h2 {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 30px;
        }

        /* --- フォーム共通スタイル --- */
        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-size: 16px;
            font-weight: normal;
        }
        
        /* --- エラー表示のスタイル --- */
        .error-message {
            color: #ff0000;
            font-size: 14px;
            margin-left: 10px;
            display: none;
        }
        
        /* エラー時に表示 */
        .form-group.has-error .error-message {
            display: inline;
        }

        .form-control, .input-text {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid #cccccc;
            border-radius: 3px;
            font-size: 16px;
            box-sizing: border-box;
            background-color: #ffffff;
            color: #333333;
            transition: border-color 0.2s;
        }
        
        /* エラー時の入力フィールドの枠線 */
        .form-group.has-error .form-control, 
        .form-group.has-error .input-text {
            border-color: #ff0000;
        }

        /* --- 銀行プルダウンのカスタムスタイル --- */
        .custom-select-wrapper {
            position: relative;
        }
        
        .form-control {
            cursor: pointer;
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            padding-right: 35px;
        }

        .custom-select-wrapper::after {
            content: '▼';
            position: absolute;
            top: 50%;
            right: 12px;
            transform: translateY(-50%);
            pointer-events: none;
            font-size: 12px;
            color: #555555;
            transition: opacity 0.1s;
        }

        .custom-select-wrapper[data-state="open"]::after {
            opacity: 0;
        }

        #bank-select[size]:not([size="1"]) {
            border: 1px solid #cccccc;
            height: auto;
            max-height: 200px; 
            overflow-y: auto;
            position: absolute;
            z-index: 10;
            width: 100%;
            background-color: #ffffff;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 0; 
            margin: 0;
        }
        
        #bank-select option {
            padding: 8px 12px;
            display: block; 
        }
        
        #bank-select option:hover {
            background-color: #007bff;
            color: #ffffff;
        }

        /* --- 口座種別のラジオボタンスタイル --- */
        .radio-group {
            margin-top: 10px;
        }
        .radio-item {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            cursor: pointer;
            font-size: 16px;
        }
        .radio-item input[type="radio"] {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            border: 1px solid #999;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            margin: 0 8px 0 0;
            position: relative;
            flex-shrink: 0;
            top: 1px;
        }
        .radio-item input[type="radio"]:checked {
            border-color: #333333;
        }
        .radio-item input[type="radio"]:checked::after {
            content: '';
            position: absolute;
            top: 3px;
            left: 3px;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: #333333;
        }


        /* --- その他の要素 --- */
        .input-caption {
            font-size: 12px;
            color: #555555; 
            margin-top: 5px;
        }
        
        .note-list {
            list-style: none;
            padding-left: 0;
            margin-top: 25px;
            font-size: 12px;
            color: #555555;
        }
        
        .note-list li {
            margin-bottom: 8px;
        }

        .note-list li::before {
            content: '*';
            color: #ff0000;
            font-weight: bold;
            display: inline-block;
            width: 1em;
            margin-left: -1em;
        }

        .btn-submit {
            display: block;
            width: 100%;
            padding: 15px;
            margin-top: 35px;
            background-color: #555555; 
            color: white;
            border: none;
            border-radius: 4px;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .btn-submit:hover {
            background-color: #444444;
        }
        
        .help-link {
            text-align: center;
            margin-top: 20px;
        }
        .help-link a {
            font-size: 14px;
            color: #007bff; 
            text-decoration: none;
        }
        
        /* --- フッタースタイル --- */
        footer {
            background-color: #333333;
            padding: 15px 0 5px;
            width: 100%;
            font-size: 12px;
            color: #cccccc;
            flex-shrink: 0;
        }

        .footer-nav {
            max-width: 900px;
            margin: 0 auto;
            display: flex;
            justify-content: space-around;
            padding: 0 20px;
        }
        
        .footer-nav a {
            color: #cccccc;
            text-decoration: none;
            padding: 0 10px;
            white-space: nowrap;
        }

        .copyright {
            text-align: right;
            margin-top: 10px;
            padding-right: 20px;
            max-width: 900px;
            margin-left: auto;
            font-size: 11px;
        }
    </style>
</head>
<body>

<div class="main-content" id="mainContent">
    <header>
        <div class="logo">SUBKARI</div>
    </header>
    
    <h2>振込先口座の登録</h2>

    <form id="registrationForm">
        <div class="form-group" id="group-bank-select">
            <label for="bank-select">
                銀行
                <span class="error-message">(必須)</span>
            </label>
            <div class="custom-select-wrapper" id="select-wrapper">
                <select id="bank-select" name="bank" class="form-control">
                    <option value="" selected>選択してください</option>
                    <option value="mufg">三菱UFJ銀行</option>
                    <option value="mizuho">みずほ銀行</option>
                    <option value="smbc">三井住友銀行</option>
                    <option value="sony">ソニー銀行</option>
                    <option value="paypay">PayPay銀行</option>
                    <option value="rakuten">楽天銀行</option>
                    <option value="yucho">ゆうちょ銀行</option>
                </select>
            </div>
        </div>
        
        <div class="form-group" id="group-account-type">
            <label>口座種別</label>
            <div class="radio-group">
                <label class="radio-item">
                    <input type="radio" name="account_type" value="futsu" checked>
                    普通預金
                </label>
                <label class="radio-item">
                    <input type="radio" name="account_type" value="teiki">
                    定期預金
                </label>
                <label class="radio-item">
                    <input type="radio" name="account_type" value="chochiku">
                    貯蓄預金
                </label>
            </div>
        </div>

        <div class="form-group" id="group-branch-code">
            <label for="branch-code">
                支店コード
                <span class="error-message">(必須)</span>
            </label>
            <input type="text" id="branch-code" name="branch_code" class="input-text" placeholder="例) 123 (数字3桁)">
        </div>

        <div class="form-group" id="group-account-number">
            <label for="account-number">
                口座番号
                <span class="error-message">(必須)</span>
            </label>
            <input type="text" id="account-number" name="account_number" class="input-text" placeholder="例) 1234567 (数字7桁)">
            <p class="input-caption">
                *口座番号が7桁未満の場合は先頭に0をつけてください
            </p>
        </div>

        <div class="form-group" id="group-account-name-sei">
            <label for="account-name-sei">
                口座名義（セイ）
                <span class="error-message">(必須)</span>
            </label>
            <input type="text" id="account-name-sei" name="account_name_sei" class="input-text" placeholder="例) ハル">
        </div>

        <div class="form-group" id="group-account-name-mei">
            <label for="account-name-mei">
                口座名義（メイ）
                <span class="error-message">(必須)</span>
            </label>
            <input type="text" id="account-name-mei" name="account_name_mei" class="input-text" placeholder="例) オオサカ">
        </div>
        
        <ul class="note-list">
            <li>振込先が間違っている場合、再度振込手数料が発生します。</li>
            <li>登録された氏名と売上金の振込口座名義が一致しない場合、振込申請をすることはできません</li>
            <li>振込先口座は、ご本人名義の口座のみ利用できます。口座名義が旧姓の場合、名義変更のうえ、改めてお手続きをお願いします。</li>
        </ul>

        <button type="submit" class="btn-submit">
            登録する
        </button>
        
        <p class="help-link">
            <a href="#">支店コードについて?</a>
        </p>

    </form>
    
</div>

<footer id="globalFooter">
    <div class="footer-nav">
        <a href="#">初めての方へ</a>
        <a href="#">サイトマップ</a>
        <a href="#">FAQ</a>
        <a href="#">お問い合わせ</a>
        <a href="#">利用規約</a>
        <a href="#">プライバシーポリシー</a>
        <a href="#">特定商取引法に基づく表記</a>
        <a href="#">古物営業法に基づく表示</a>
    </div>
    <div class="copyright">
        © 2025 HAL OSAKA IA・IH Team 5
    </div>
</footer>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const registrationForm = document.getElementById('registrationForm');
        const bankSelect = document.getElementById('bank-select');
        const selectWrapper = document.getElementById('select-wrapper');
        
        // チェック対象のフィールドを定義
        const fields = [
            { id: 'bank-select', type: 'select', group: 'group-bank-select' },
            { id: 'branch-code', type: 'text', group: 'group-branch-code' },
            { id: 'account-number', type: 'text', group: 'group-account-number' },
            { id: 'account-name-sei', type: 'text', group: 'group-account-name-sei' },
            { id: 'account-name-mei', type: 'text', group: 'group-account-name-mei' }
        ];

        // --- プルダウンのカスタム制御 (省略なし) ---
        const defaultSize = 1; 
        const openSize = 8; 

        bankSelect.setAttribute('size', defaultSize);

        bankSelect.addEventListener('mousedown', function(event) {
            if (bankSelect.size == defaultSize) {
                event.preventDefault(); 
                bankSelect.setAttribute('size', openSize);
                selectWrapper.setAttribute('data-state', 'open');
                bankSelect.focus(); 
            }
        });

        bankSelect.addEventListener('change', function() {
            bankSelect.setAttribute('size', defaultSize);
            selectWrapper.removeAttribute('data-state');
        });

        bankSelect.addEventListener('blur', function() {
            setTimeout(() => {
                bankSelect.setAttribute('size', defaultSize);
                selectWrapper.removeAttribute('data-state');
            }, 100); 
        });

        // --- 画面遷移ロジック ---
        function showCompletionScreen() {
            // フォームの入力が全て完了した場合、register_complete.htmlへページ遷移
            // 🚨 重要: register_complete.htmlがこのファイルと同じ階層にあることを想定
            window.location.href = 'register_complete.html'; 
        }

        // --- フォーム送信処理 (赤文字エラー表示とページ遷移) ---
        registrationForm.addEventListener('submit', function(event) {
            event.preventDefault();
            
            let isFormValid = true;
            
            // 全てのエラー表示をリセット
            document.querySelectorAll('.form-group').forEach(group => {
                group.classList.remove('has-error');
            });
            
            // バリデーションチェック
            fields.forEach(fieldDef => {
                const fieldElement = document.getElementById(fieldDef.id);
                const formGroup = document.getElementById(fieldDef.group);
                let isFieldEmpty = false;
                
                if (fieldDef.type === 'select') {
                    if (fieldElement.value === "") {
                        isFieldEmpty = true;
                    }
                } else if (fieldDef.type === 'text') {
                    if (fieldElement.value.trim() === "") {
                        isFieldEmpty = true;
                    }
                }
                
                if (isFieldEmpty) {
                    isFormValid = false;
                    // エラークラスを追加して赤文字と赤枠を表示
                    formGroup.classList.add('has-error');
                }
            });

            if (isFormValid) {
                // 全て入力済みの場合、登録完了画面へ遷移
                showCompletionScreen();
            } else {
                // 未入力がある場合、最初のエラーフィールドまでスクロール
                const firstError = document.querySelector('.form-group.has-error');
                if (firstError) {
                    firstError.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }
            }
        });
    });
</script>

</body>
</html>